Shader "MGFX/NPR/CelShading2DS"
{
    Properties
    {
{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.Properties.txt %}
    }

    SubShader
    {
		Tags
		{ 
			"RenderType"="Opaque"
		}

		Pass
		{
			Tags
			{
				"LightMode"="ForwardBase"
			}
			Cull Back

			CGPROGRAM
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGFwdBase.txt %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}
			ENDCG
		}

		Pass
		{
			Tags
			{
				"LightMode"="ForwardBase"
			}
			Cull Front

		    CGPROGRAM
			#define BACKFACE_ON
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGFwdBase.txt %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}    
			ENDCG
		}

		Pass
		{
			Tags
			{
				"LightMode"="ForwardAdd"
			}

			ZWrite Off
			ZTest LEqual
			Blend One One
			Cull Back

			CGPROGRAM
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGFwdAdd.txt %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}
			ENDCG
		}

		Pass
		{
			Tags
			{
				"LightMode"="ForwardAdd"
			}

			ZWrite Off
			ZTest LEqual
			Blend One One
			Cull Front

		    CGPROGRAM
		    #define BACKFACE_ON
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
			{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGFwdAdd.txt %}
			{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}
			ENDCG
		}

		// shadow casting support
		UsePass "Legacy Shaders/VertexLit/SHADOWCASTER"
    }

    CustomEditor "MGFX.NPRCelShading2UI"
}