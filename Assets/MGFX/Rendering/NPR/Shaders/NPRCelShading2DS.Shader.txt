Shader "MGFX/NPR/CelShading2DS"
{
    Properties
    {
{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.Properties.txt %}
    }

    SubShader
    {
Tags
{ 
	"RenderType"="Opaque"
}

Pass
{
	Tags
	{
		"LightMode"="ForwardBase"
	}
	Cull Back

	CGPROGRAM
	#pragma vertex vert
	#pragma fragment frag_base
	#pragma multi_compile_fwdbase novertexlight LIGHTMAP_OFF LIGHTMAP_ON DIRLIGHTMAP_OFF DIRLIGHTMAP_COMBINED
	#pragma target 3.0

	#pragma shader_feature _NORMAL_MAP_ON
	#pragma shader_feature _DARKEN_BACKFACES_ON
	#pragma shader_feature _DIM_ON
	#pragma shader_feature _OVERLAY_ON
	#pragma shader_feature _DIFFUSE_LUT_ON
	#pragma shader_feature _RIM_ON
	#pragma shader_feature _MATCAP_ON
	#pragma shader_feature _EDGE_ON

#include "UnityCG.cginc"
#include "Lighting.cginc"
{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}

	ENDCG
}

Pass
{
	Tags
	{
		"LightMode"="ForwardBase"
	}
	Cull Front

    CGPROGRAM
	#pragma vertex vert
	#pragma fragment frag_base
	#pragma multi_compile_fwdbase novertexlight LIGHTMAP_OFF LIGHTMAP_ON DIRLIGHTMAP_OFF DIRLIGHTMAP_COMBINED
	#pragma target 3.0

	#pragma shader_feature _NORMAL_MAP_ON
	#pragma shader_feature _DARKEN_BACKFACES_ON
	#pragma shader_feature _DIM_ON
	#pragma shader_feature _OVERLAY_ON
	#pragma shader_feature _DIFFUSE_LUT_ON
	#pragma shader_feature _RIM_ON
	#pragma shader_feature _MATCAP_ON
	#pragma shader_feature _EDGE_ON

#include "UnityCG.cginc"
#include "Lighting.cginc"
#define BACKFACE_ON
{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}
    
	ENDCG
}


Pass
{
	Tags
	{
		"LightMode"="ForwardAdd"
	}

	ZWrite Off
	ZTest LEqual
	Blend One One
	Cull Back

	CGPROGRAM

	#pragma vertex vert
	#pragma fragment frag_add
	#pragma multi_compile_fwdadd_fullshadows
	#pragma target 3.0

	#pragma shader_feature _NORMAL_MAP_ON
	#pragma shader_feature _DARKEN_BACKFACES_ON
	#pragma shader_feature _DIM_ON
	#pragma shader_feature _OVERLAY_ON
	#pragma shader_feature _DIFFUSE_LUT_ON

#include "UnityCG.cginc"
#include "Lighting.cginc"
{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}

	ENDCG
}

Pass
{
	Tags
	{
		"LightMode"="ForwardAdd"
	}

	ZWrite Off
	ZTest LEqual
	Blend One One
	Cull Front

    CGPROGRAM
	#pragma vertex vert
	#pragma fragment frag_add
	#pragma multi_compile_fwdadd_fullshadows
	#pragma target 3.0

	#pragma shader_feature _NORMAL_MAP_ON
	#pragma shader_feature _DARKEN_BACKFACES_ON
	#pragma shader_feature _DIM_ON
	#pragma shader_feature _OVERLAY_ON
	#pragma shader_feature _DIFFUSE_LUT_ON

#include "UnityCG.cginc"
#include "Lighting.cginc"
#define BACKFACE_ON
{% unityasset MGFX/Rendering/Common/Shaders/MGFXAutoLight.cginc %}
{% unityasset MGFX/Rendering/Common/Shaders/MGFXNoise.cginc %}
{% unityasset MGFX/Rendering/NPR/Shaders/NPRCelShading2.CGinc.txt %}

	ENDCG
}


// shadow casting support
UsePass "Legacy Shaders/VertexLit/SHADOWCASTER"
    }


    CustomEditor "MGFX.NPRCelShading2UI"
}